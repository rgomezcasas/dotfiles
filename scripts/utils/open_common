#!/usr/bin/env bash

set -euo pipefail

source "$DOTLY_PATH/scripts/core/_main.sh"

##? Open one common element
#?? 1.0.0
##?
##? Usage:
##?   open_common
docs::parse "$@"

declare -A folders

folders=(
	["â¬‡ï¸ Downloads"]="$HOME/Downloads"
	["ğŸ–¥ï¸ Desktop"]="$HOME/Desktop"
	["ğŸ‘¨â€ğŸ’» Code"]="$HOME/Code/codely"
	["â˜ï¸ tmp"]="$HOME/Desktop/tmp"
	["ğŸ“· Screenshots"]="$HOME/Desktop/tmp/screenshots"
	["ğŸ¥ Screencasts"]="$HOME/Desktop/tmp/screencasts"
	["ğŸ¤ Thumbnails"]="$GOOGLE_DRIVE_PATH/Shared drives/ğŸ‘‘ Contents/ğŸ”– Pro/Design/Thumbnails Cursos"
	["ğŸ”´ Recordings"]="$GOOGLE_DRIVE_PATH/Shared drives/ğŸ‘‘ Contents/ğŸ”´ Recordings"
	["ğŸ“½ï¸ Slides"]="BROWSE:$HOME/Library/Mobile Documents/com~apple~CloudDocs/ğŸ Codely/ğŸ”– Cursos"
)

folder=$(printf "%s\n" "${!folders[@]}" | choose)

if [[ -z $folder ]]; then
	echo "No folder selected"
	exit 0
fi

path="${folders[$folder]}"

if [[ $path == BROWSE:* ]]; then
	browse_path="${path#BROWSE:}"
	selected=$(ls -t "$browse_path" | choose)
	if [[ -n $selected ]]; then
		open "$browse_path/$selected"
	fi
else
	open "$path"
fi
